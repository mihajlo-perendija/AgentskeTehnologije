{"version":3,"sources":["components/register/Register.js","components/login/Login.js","components/conversations/Conversations.js","components/conversation/Conversation.js","App.js","index.js"],"names":["Register","props","onChange","e","setState","target","name","value","validateInput","onSubmit","preventDefault","submitted","sendRegisterRequest","state","usernameAlertHidden","passwordAlertHidden","confirmPasswordAlertHidden","requestOptions","method","headers","body","JSON","stringify","username","password","fetch","then","response","ok","alert","registered","catch","error","console","log","confirmPassword","proceedCallback","this","usernameValid","passwordValid","confirmPasswordValid","length","to","id","className","type","placeholder","style","visibility","Component","Login","sendLoginRequest","json","data","loggedInUser","setLoggedInUser","Conversations","getConversationClass","user","selectedUser","users","map","key","onClick","selectConversation","bind","Conversation","getMessageClass","message","sender","messages","slice","reverse","Date","timeStamp","getTime","text","toLocaleString","App","visibleMessages","getConversationMessages","filter","reciever","logout","url","getOnlineUsers","getAllUsers","onMessageChange","onSendMessage","changeToAll","basename","exact","path","render","Fragment","marginLeft","width","debounce","onMount","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.08cb8766.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport './Register.css';\r\n\r\nclass Register extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            confirmPassword: \"\",\r\n            submitted: false,\r\n            usernameAlertHidden: true,\r\n            passwordAlertHidden: true,\r\n            confirmPasswordAlertHidden: true,\r\n            registered: false\r\n        }\r\n    }\r\n\r\n\r\n    onChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value }, this.validateInput);\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.setState({ submitted: true }, this.sendRegisterRequest);\r\n    }\r\n\r\n    sendRegisterRequest = () => {\r\n        this.validateInput(() => {\r\n            if (this.state.usernameAlertHidden && this.state.passwordAlertHidden && this.state.confirmPasswordAlertHidden) {\r\n\r\n                const requestOptions = {\r\n                    method: 'POST',\r\n                    headers: { 'content-type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        username: this.state.username,\r\n                        password: this.state.password\r\n                    })\r\n                };\r\n                const url = process.env.NODE_ENV === 'production' ? \"rest/chat/users/register\" : \"http://localhost:8080/ChatWar/rest/chat/users/register\";\r\n\r\n                fetch(url, requestOptions)\r\n                    .then((response) => {\r\n                        if (!response.ok) {\r\n                            alert(\"Username already exists\")\r\n                        }\r\n                        else {\r\n                            alert(\"Successfuly registered\");\r\n                            this.setState({ registered: true });\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error);\r\n                    });\r\n            }\r\n        });\r\n    }\r\n\r\n    validateInput(proceedCallback) {\r\n        if (this.state.submitted) {\r\n            this.setState({\r\n                usernameAlertHidden: this.usernameValid(),\r\n                passwordAlertHidden: this.passwordValid(),\r\n                confirmPasswordAlertHidden: this.confirmPasswordValid()\r\n            }, proceedCallback);\r\n        }\r\n    }\r\n\r\n    usernameValid() {\r\n        return this.state.username.length > 3 ? true : false;\r\n    }\r\n\r\n    passwordValid() {\r\n        return this.state.password.length > 5 ? true : false;\r\n    }\r\n\r\n    confirmPasswordValid() {\r\n        return this.state.password === this.state.confirmPassword;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.registered === true) {\r\n            return <Redirect to='/login' />\r\n        }\r\n\r\n        return (\r\n            <div >\r\n                <form onSubmit={this.onSubmit} id=\"register_form\">\r\n                    <h2 id=\"register_h2\">Sign Up</h2>\r\n                    <p className=\"register_p\">\r\n                        <input\r\n                            className=\"register_input\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            placeholder=\"Username\"\r\n                            value={this.state.username}\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"register_span\" style={{ visibility: this.state.usernameAlertHidden ? 'hidden' : 'visible' }}\r\n                        >Enter a username longer than 4 characters</span>\r\n                    </p>\r\n                    <p className=\"register_p\">\r\n                        <input\r\n                            className=\"register_input\"\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={this.state.password}\r\n\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"register_span\" style={{ visibility: this.state.passwordAlertHidden ? 'hidden' : 'visible' }}\r\n                        >Enter a password longer than 5 characters</span>\r\n                    </p>\r\n                    <p className=\"register_p\">\r\n                        <input\r\n                            className=\"register_input\"\r\n                            type=\"password\"\r\n                            name=\"confirmPassword\"\r\n                            placeholder=\"Confirm password\"\r\n                            value={this.state.confirmPassword}\r\n\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"register_span\" style={{ visibility: this.state.confirmPasswordAlertHidden ? 'hidden' : 'visible' }}\r\n                        >Your passwords do not match</span>\r\n                    </p>\r\n                    <p className=\"register_p\">\r\n                        <input className=\"register_input\" type=\"submit\" value=\"Create My Account\" id=\"submit\" />\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Register;","import React, { Component } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport './Login.css';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            submitted: false,\r\n            usernameAlertHidden: true,\r\n            passwordAlertHidden: true,\r\n            loggedInUser: false,\r\n        };\r\n        //this.setLoggedInUser = this.setLoggedInUser.bind(this);\r\n    }\r\n    \r\n\r\n    onChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value }, this.validateInput);\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.setState({ submitted: true }, this.sendLoginRequest);\r\n    }\r\n\r\n    sendLoginRequest = () => {\r\n        this.validateInput(() => {\r\n            if (this.state.usernameAlertHidden && this.state.passwordAlertHidden) {\r\n\r\n                const requestOptions = {\r\n                    method: 'POST',\r\n                    headers: { 'content-type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        username: this.state.username,\r\n                        password: this.state.password\r\n                    })\r\n                };\r\n                const url = process.env.NODE_ENV === 'production' ? \"rest/chat/users/login\" : \"http://localhost:8080/ChatWar/rest/chat/users/login\";\r\n\r\n                fetch(url, requestOptions)\r\n                    .then((response) => {\r\n                        if (!response.ok) {\r\n                            alert(\"Invalid username or password\")\r\n                        }\r\n                        else {\r\n                            alert(\"Successfuly logged in\");\r\n                            //this.setState({loggedIn: true});\r\n                            return response.json();\r\n                        }\r\n                    })\r\n                    .then((data) => {\r\n                        if (data?.username)\r\n                            this.setState({loggedInUser: data});\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error);\r\n                    });\r\n            }\r\n        });\r\n    }\r\n\r\n    validateInput(proceedCallback) {\r\n        if (this.state.submitted) {\r\n            this.setState({\r\n                usernameAlertHidden: this.usernameValid(),\r\n                passwordAlertHidden: this.passwordValid(),\r\n            }, proceedCallback);\r\n        }\r\n    }\r\n\r\n    usernameValid() {\r\n        return this.state.username.length > 3? true : false;\r\n    }\r\n\r\n    passwordValid() {\r\n        return this.state.password.length > 5? true : false;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loggedInUser ) {\r\n            this.props.setLoggedInUser(this.state.loggedInUser);\r\n            return <Redirect to='/chat' />\r\n            //this.props.history.push('/chat')\r\n        }\r\n        return (\r\n            <div >\r\n                <form onSubmit={this.onSubmit} id=\"login_form\">\r\n                    <h2 id=\"login_h2\">Sign In</h2>\r\n                    <p className=\"login_p\">\r\n                        <input\r\n                        className=\"login_input\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            placeholder=\"Username\"\r\n                            value={this.state.username}\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"login_span\" style={{visibility: this.state.usernameAlertHidden ? 'hidden' : 'visible' }} \r\n                        >Invalid username</span>\r\n                    </p>\r\n                    <p className=\"login_p\">\r\n                        <input\r\n                        className=\"login_input\"\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={this.state.password}\r\n\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"login_span\" style={{visibility: this.state.passwordAlertHidden ? 'hidden' : 'visible' }} \r\n                        >Invalid password</span>\r\n                    </p>\r\n                    <p className=\"login_p\">\r\n                        <input className=\"login_input\" type=\"submit\" value=\"Sign In\" id=\"submit\"  />\r\n                    </p>\r\n                    <div id=\"route_to_register_div\" >\r\n                        <h2>Don't have an account? <Link to=\"/register\">Register</Link>  </h2>\r\n                        {/* <a href=\"./register\">Register</a> */}\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nLogin.propTypes = {\r\n    setLoggedInUser: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Login;","import React, { Component } from 'react';\r\nimport './Conversations.css';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass Conversations extends Component {\r\n\r\n    getConversationClass = (user) => {\r\n        //if (this.props.selectedUser === \"ALL\"){\r\n        //    return \"conversation\";\r\n        //} else {\r\n            return user.username === this.props.selectedUser?.username ? \"conversation active\" : \"conversation\";\r\n        //}\r\n    }\r\n\r\n    render() {\r\n        if (this.props.users.length === 0){\r\n            return (null);\r\n        }\r\n        return this.props.users.map((user) => (\r\n            <div className={this.getConversationClass(user)} key={user.id} onClick={this.props.selectConversation.bind(this, user)}>\r\n                <div className=\"title-text\">\r\n                    {user.username}\r\n                </div>\r\n                <div className=\"created-date\">\r\n                    {/* {user.messages ? user.messages[user.messages.length - 1].date.toLocaleString() : \"\"} */}\r\n                </div>\r\n                <div className=\"conversation-message\">\r\n                    {/* {user.messages ? user.messages[user.messages.length - 1].text : \"No messages\"} */}\r\n                </div>\r\n            </div>\r\n        )\r\n        );\r\n    }\r\n}\r\n\r\nConversations.propTypes = {\r\n    users: PropTypes.array.isRequired,\r\n    selectedUser: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default Conversations;","import React, { Component } from 'react';\r\nimport './Conversation.css';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass Conversation extends Component {\r\n    getMessageClass = (message) => {\r\n        return message.sender === this.props.loggedInUser.username ? \"message-row my-message\" : \"message-row other-message\";\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.messages) {\r\n            return (null);\r\n        }\r\n        return this.props.messages.slice(0).reverse().map((message) => (\r\n            <div className={this.getMessageClass(message)} key={(new Date(message.timeStamp)).getTime()}>\r\n                <div className=\"message-text\">{message.text}</div>\r\n                <div>\r\n                    <span className=\"message-username\">{message.sender + \" at \"}</span>\r\n                    <span className=\"message-time\">{(new Date(message.timeStamp)).toLocaleString()}</span>\r\n                </div>\r\n            </div>\r\n        )\r\n        );\r\n    }\r\n}\r\n\r\nConversation.propTypes = {\r\n    user: PropTypes.object.isRequired,\r\n    loggedInUser: PropTypes.object.isRequired,\r\n    messages: PropTypes.array.isRequired\r\n}\r\n\r\n\r\nexport default Conversation;","import React, { Component } from 'react';\r\nimport { HashRouter as Router, Route, Link } from 'react-router-dom'\r\nimport { Persist } from 'react-persist'\r\nimport './App.css';\r\nimport Register from './components/register/Register.js'\r\nimport Login from './components/login/Login.js'\r\nimport Conversations from './components/conversations/Conversations.js'\r\nimport Conversation from './components/conversation/Conversation.js'\r\n\r\nclass App extends Component {\r\n    state = {\r\n        loggedInUser: null,\r\n        users: [],\r\n        selectedUser: {\r\n            // id: 2,\r\n            // username: \"Vladimir Iljic Uljanov Lenjin\",\r\n            // messages: [{\r\n            //     sender: \"Vladimir Iljic Uljanov Lenjin\",\r\n            //     reciever: \"Mihajlo Perendija\",\r\n            //     text: \"Привет, товарищ!\",\r\n            //     date: new Date(1587148000000)\r\n            // },\r\n            // {\r\n            //     sender: \"Mihajlo Perendija\",\r\n            //     reciever: \"Vladimir Iljic Uljanov Lenjin\",\r\n            //     text: \"Поздрав друже!\",\r\n            //     date: new Date(1587148716000)\r\n            // },\r\n            // ]\r\n\r\n        },\r\n        text: \"\",\r\n        visibleMessages: []\r\n    }\r\n\r\n    selectConversation = (user) => {\r\n        this.setState({\r\n            selectedUser: user,\r\n            text: \"\"\r\n        }, this.getConversationMessages);\r\n    }\r\n\r\n    getConversationMessages = () => {\r\n        if (this.state.selectedUser.username === \"ALL\") {\r\n            let messages = this.state.loggedInUser.messages\r\n                .filter(message => message.reciever === \"ALL\");\r\n\r\n            this.setState({ visibleMessages: messages });\r\n        } else {\r\n            let messages = this.state.loggedInUser.messages\r\n                .filter(message => (message.sender === this.state.selectedUser.username\r\n                    && message.reciever === this.state.loggedInUser.username)\r\n                    ||\r\n                    (message.sender === this.state.loggedInUser.username\r\n                    && message.reciever === this.state.selectedUser.username));\r\n\r\n            this.setState({ visibleMessages: messages });\r\n        }\r\n    }\r\n\r\n    setLoggedInUser = (user) => {\r\n        this.setState({ loggedInUser: user });\r\n    }\r\n\r\n    logout = () => {\r\n        const url = process.env.NODE_ENV === 'production' ? `rest/chat/users/loggedIn/${this.state.loggedInUser.username}` : `http://localhost:8080/ChatWar/rest/chat/users/loggedIn/${this.state.loggedInUser.username}`;\r\n        fetch(url, { method: \"DELETE\", headers: { \"content-type\": \"application/json\" } })\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    alert(\"Error\");\r\n                }\r\n                else {\r\n                    this.setState({\r\n                        loggedInUser: null,\r\n                        selectedUser: null,\r\n                        users: []\r\n                    });\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n\r\n    }\r\n\r\n    getOnlineUsers = () => {\r\n        const url = process.env.NODE_ENV === 'production' ? \"rest/chat/users/loggedIn\" : \"http://localhost:8080/ChatWar/rest/chat/users/loggedIn\";\r\n        fetch(url)\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    alert(\"Error\");\r\n                }\r\n                else {\r\n                    return response.json();\r\n                }\r\n            }).then((data) => {\r\n                this.setState({ users: data.filter(user => user.username !== this.state.loggedInUser.username) });\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    getAllUsers = () => {\r\n        const url = process.env.NODE_ENV === 'production' ? \"rest/chat/users/registered\" : \"http://localhost:8080/ChatWar/rest/chat/users/registered\";\r\n        fetch(url)\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    alert(\"Error\");\r\n                }\r\n                else {\r\n                    return response.json();\r\n                }\r\n            }).then((data) => {\r\n                this.setState({ users: data.filter(user => user.username !== this.state.loggedInUser.username) });\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n\r\n\r\n    onMessageChange = (e) => {\r\n        this.setState({ text: e.target.value });\r\n    }\r\n\r\n    onSendMessage = (e) => {\r\n        e.preventDefault();\r\n        let type;\r\n        if (this.state.selectedUser.username === \"ALL\") {\r\n            type = \"all\";\r\n        } else {\r\n            type = \"user\";\r\n        }\r\n        let message = {\r\n            sender: this.state.loggedInUser.username,\r\n            reciever: this.state.selectedUser.username,\r\n            text: this.state.text,\r\n            timeStamp: (new Date()).getTime()\r\n        }\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'content-type': 'application/json' },\r\n            body: JSON.stringify(message)\r\n        };\r\n        const url = process.env.NODE_ENV === 'production' ? `rest/chat/messages/${type}` : `http://localhost:8080/ChatWar/rest/chat/messages/${type}`;\r\n\r\n        fetch(url, requestOptions)\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    alert(\"Error\")\r\n                }\r\n                else {\r\n                    let messages = [...this.state.loggedInUser.messages, message]\r\n                    let user = this.state.loggedInUser;\r\n                    user.messages = messages;\r\n                    this.setState({\r\n                        loggedInUser: user,\r\n                        text: \"\"\r\n                    }, this.getConversationMessages);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    changeToAll = () => {\r\n        this.setState({\r\n            selectedUser: { username: \"ALL\" },\r\n            text: \"\"\r\n        }, this.getConversationMessages);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Router basename=\"/\">\r\n                <div className=\"App\">\r\n                    <Route exact path=\"/\" render={props => (\r\n                        <React.Fragment>\r\n                            <Login setLoggedInUser={this.setLoggedInUser}></Login>\r\n                        </React.Fragment>\r\n                    )} />\r\n                    <Route exact path=\"/login\" render={props => (\r\n                        <React.Fragment>\r\n                            <Login setLoggedInUser={this.setLoggedInUser}></Login>\r\n                        </React.Fragment>\r\n                    )} />\r\n                    <Route exact path=\"/register\" render={props => (\r\n                        <React.Fragment>\r\n                            <Register></Register>\r\n                        </React.Fragment>\r\n                    )} />\r\n                    <Route exact path=\"/chat\" render={props => (\r\n                        <React.Fragment>\r\n                            <div id=\"chat-container\">\r\n                                <div id=\"search-container\">\r\n                                    {\r\n                                        this.state.loggedInUser !== null ?\r\n                                            <div className=\"buttons-div\">\r\n                                                <button className=\"users-button\" onClick={this.getOnlineUsers}>Online</button>\r\n                                                <button className=\"users-button\" style={{ marginLeft: \"20px\" }} onClick={this.getAllUsers}>All</button>\r\n                                            </div>\r\n                                            : null\r\n                                    }\r\n                                </div>\r\n                                <div id=\"conversation-list\">\r\n                                    <Conversations users={this.state.users} selectConversation={this.selectConversation} selectedUser={this.state.selectedUser}></Conversations>\r\n                                </div>\r\n                                <div id=\"lower-left-container\">\r\n                                    {\r\n                                        this.state.loggedInUser === null ?\r\n                                            <div className=\"buttons-div\">\r\n                                                <Link className=\"button-link\" to='/login'>Login</Link>\r\n                                                <Link className=\"button-link\" style={{ marginLeft: \"20px\" }} to='/register'>Sign up</Link>\r\n\r\n                                            </div>\r\n                                            :\r\n                                            <div className=\"buttons-div\">\r\n                                                <button className=\"users-button\" onClick={this.logout}>Logout</button>\r\n                                                {\r\n                                                    this.state.selectedUser?.username !== \"ALL\" ?\r\n                                                        <button className=\"users-button\" style={{ marginLeft: \"20px\", width: \"120px\" }} onClick={this.changeToAll}>Send to all</button>\r\n                                                        :\r\n                                                        null\r\n                                                }\r\n\r\n                                            </div>\r\n                                    }\r\n\r\n                                </div>\r\n                                <div id=\"chat-title\">\r\n                                    <span>{this.state.selectedUser?.username}</span>\r\n                                </div>\r\n                                <div id=\"chat-message-list\">\r\n                                    {this.state.loggedInUser != null && this.state.selectedUser ?\r\n                                        <Conversation messages={this.state.visibleMessages} user={this.state.selectedUser} loggedInUser={this.state.loggedInUser}></Conversation> : null}\r\n                                </div>\r\n                                <form id=\"chat-form\" onSubmit={this.onSendMessage}>\r\n                                    {/* <form > */}\r\n                                    <div>\r\n                                        <input type=\"text\" value={this.state.text} placeholder=\"type a message\" onChange={this.onMessageChange} style={{ width: '80%' }} />\r\n                                        <input type=\"submit\" value=\"Send\"></input>\r\n                                    </div>\r\n\r\n                                    {/* </form> */}\r\n                                </form>\r\n\r\n                            </div>\r\n                        </React.Fragment>\r\n                    )} />\r\n                </div>\r\n                <Persist\r\n                    name=\"main-component\"\r\n                    data={this.state}\r\n                    debounce={500}\r\n                    onMount={data => this.setState(data)}\r\n                />\r\n            </Router>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}