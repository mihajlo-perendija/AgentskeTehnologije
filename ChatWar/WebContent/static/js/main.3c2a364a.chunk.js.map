{"version":3,"sources":["components/register/Register.js","components/login/Login.js","components/conversations/Conversations.js","components/conversation/Conversation.js","App.js","index.js"],"names":["Register","props","onChange","e","setState","target","name","value","validateInput","onSubmit","preventDefault","submitted","sendRegisterRequest","state","usernameAlertHidden","passwordAlertHidden","confirmPasswordAlertHidden","requestOptions","method","headers","body","JSON","stringify","username","password","fetch","then","response","ok","alert","registered","catch","error","console","log","confirmPassword","proceedCallback","this","usernameValid","passwordValid","confirmPasswordValid","length","to","id","className","type","placeholder","style","visibility","Component","Login","sendLoginRequest","json","data","setLoggedInUser","history","push","withRouter","Conversations","getConversationClass","user","selectedUser","users","map","key","onClick","selectConversation","bind","Conversation","getMessageClass","message","sender","loggedInUser","messages","slice","reverse","Date","timeStamp","getTime","text","toLocaleString","App","visibleMessages","getConversationMessages","filter","receiver","getUserMessages","url","getAllDataOnLogin","getOnlineUsers","new_uri","loc","window","location","protocol","host","pathname","wsHost","websocket","WebSocket","onopen","onmessage","evt","parse","onclose","logout","getAllUsers","onMessageChange","onSendMessage","changeToAll","basename","exact","path","render","Fragment","marginLeft","width","debounce","onMount","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3c2a364a.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport './Register.css';\r\n\r\nclass Register extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            confirmPassword: \"\",\r\n            submitted: false,\r\n            usernameAlertHidden: true,\r\n            passwordAlertHidden: true,\r\n            confirmPasswordAlertHidden: true,\r\n            registered: false\r\n        }\r\n    }\r\n\r\n\r\n    onChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value }, this.validateInput);\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.setState({ submitted: true }, this.sendRegisterRequest);\r\n    }\r\n\r\n    sendRegisterRequest = () => {\r\n        this.validateInput(() => {\r\n            if (this.state.usernameAlertHidden && this.state.passwordAlertHidden && this.state.confirmPasswordAlertHidden) {\r\n\r\n                const requestOptions = {\r\n                    method: 'POST',\r\n                    headers: { 'content-type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        username: this.state.username,\r\n                        password: this.state.password\r\n                    })\r\n                };\r\n                const url = process.env.NODE_ENV === 'production' ? \"rest/chat/users/register\" : \"http://localhost:8080/ChatWar/rest/chat/users/register\";\r\n\r\n                fetch(url, requestOptions)\r\n                    .then((response) => {\r\n                        if (!response.ok) {\r\n                            alert(\"Username already exists\")\r\n                        }\r\n                        else {\r\n                            alert(\"Successfuly registered\");\r\n                            this.setState({ registered: true });\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error);\r\n                    });\r\n            }\r\n        });\r\n    }\r\n\r\n    validateInput(proceedCallback) {\r\n        if (this.state.submitted) {\r\n            this.setState({\r\n                usernameAlertHidden: this.usernameValid(),\r\n                passwordAlertHidden: this.passwordValid(),\r\n                confirmPasswordAlertHidden: this.confirmPasswordValid()\r\n            }, proceedCallback);\r\n        }\r\n    }\r\n\r\n    usernameValid() {\r\n        return this.state.username.length > 3 ? true : false;\r\n    }\r\n\r\n    passwordValid() {\r\n        return this.state.password.length > 5 ? true : false;\r\n    }\r\n\r\n    confirmPasswordValid() {\r\n        return this.state.password === this.state.confirmPassword;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.registered === true) {\r\n            return <Redirect to='/login' />\r\n        }\r\n\r\n        return (\r\n            <div >\r\n                <form onSubmit={this.onSubmit} id=\"register_form\">\r\n                    <h2 id=\"register_h2\">Sign Up</h2>\r\n                    <p className=\"register_p\">\r\n                        <input\r\n                            className=\"register_input\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            placeholder=\"Username\"\r\n                            value={this.state.username}\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"register_span\" style={{ visibility: this.state.usernameAlertHidden ? 'hidden' : 'visible' }}\r\n                        >Enter a username longer than 4 characters</span>\r\n                    </p>\r\n                    <p className=\"register_p\">\r\n                        <input\r\n                            className=\"register_input\"\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={this.state.password}\r\n\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"register_span\" style={{ visibility: this.state.passwordAlertHidden ? 'hidden' : 'visible' }}\r\n                        >Enter a password longer than 5 characters</span>\r\n                    </p>\r\n                    <p className=\"register_p\">\r\n                        <input\r\n                            className=\"register_input\"\r\n                            type=\"password\"\r\n                            name=\"confirmPassword\"\r\n                            placeholder=\"Confirm password\"\r\n                            value={this.state.confirmPassword}\r\n\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"register_span\" style={{ visibility: this.state.confirmPasswordAlertHidden ? 'hidden' : 'visible' }}\r\n                        >Your passwords do not match</span>\r\n                    </p>\r\n                    <p className=\"register_p\">\r\n                        <input className=\"register_input\" type=\"submit\" value=\"Create My Account\" id=\"submit\" />\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Register;","import React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport './Login.css';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            submitted: false,\r\n            usernameAlertHidden: true,\r\n            passwordAlertHidden: true,\r\n        };\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value }, this.validateInput);\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.setState({ submitted: true }, this.sendLoginRequest);\r\n    }\r\n\r\n    sendLoginRequest = () => {\r\n        this.validateInput(() => {\r\n            if (this.state.usernameAlertHidden && this.state.passwordAlertHidden) {\r\n\r\n                const requestOptions = {\r\n                    method: 'POST',\r\n                    headers: { 'content-type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        username: this.state.username,\r\n                        password: this.state.password\r\n                    })\r\n                };\r\n                const url = process.env.NODE_ENV === 'production' ? \"rest/chat/users/login\" : \"http://localhost:8080/ChatWar/rest/chat/users/login\";\r\n\r\n                fetch(url, requestOptions)\r\n                    .then((response) => {\r\n                        if (!response.ok) {\r\n                            alert(\"Invalid username or password\")\r\n                        }\r\n                        else {\r\n                            alert(\"Successfuly logged in\");\r\n                            return response.json();\r\n                        }\r\n                    })\r\n                    .then((data) => {\r\n                        if (data?.username) {\r\n                            this.props.setLoggedInUser(data);\r\n                            this.props.history.push('/chat');\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error);\r\n                    });\r\n            }\r\n        });\r\n    }\r\n\r\n    validateInput(proceedCallback) {\r\n        if (this.state.submitted) {\r\n            this.setState({\r\n                usernameAlertHidden: this.usernameValid(),\r\n                passwordAlertHidden: this.passwordValid(),\r\n            }, proceedCallback);\r\n        }\r\n    }\r\n\r\n    usernameValid() {\r\n        return this.state.username.length > 3 ? true : false;\r\n    }\r\n\r\n    passwordValid() {\r\n        return this.state.password.length > 5 ? true : false;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div >\r\n                <form onSubmit={this.onSubmit} id=\"login_form\">\r\n                    <h2 id=\"login_h2\">Sign In</h2>\r\n                    <p className=\"login_p\">\r\n                        <input\r\n                            className=\"login_input\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            placeholder=\"Username\"\r\n                            value={this.state.username}\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"login_span\" style={{ visibility: this.state.usernameAlertHidden ? 'hidden' : 'visible' }}\r\n                        >Invalid username</span>\r\n                    </p>\r\n                    <p className=\"login_p\">\r\n                        <input\r\n                            className=\"login_input\"\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={this.state.password}\r\n\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <span className=\"login_span\" style={{ visibility: this.state.passwordAlertHidden ? 'hidden' : 'visible' }}\r\n                        >Invalid password</span>\r\n                    </p>\r\n                    <p className=\"login_p\">\r\n                        <input className=\"login_input\" type=\"submit\" value=\"Sign In\" id=\"submit\" />\r\n                    </p>\r\n                    <div id=\"route_to_register_div\" >\r\n                        <h2>Don't have an account? <Link to=\"/register\">Register</Link>  </h2>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nLogin.propTypes = {\r\n    setLoggedInUser: PropTypes.func.isRequired,\r\n    match: PropTypes.object.isRequired,\r\n    location: PropTypes.object.isRequired,\r\n    history: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withRouter(Login);","import React, { Component } from 'react';\r\nimport './Conversations.css';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass Conversations extends Component {\r\n\r\n    getConversationClass = (user) => {\r\n        //if (this.props.selectedUser === \"ALL\"){\r\n        //    return \"conversation\";\r\n        //} else {\r\n            return user.username === this.props.selectedUser?.username ? \"conversation active\" : \"conversation\";\r\n        //}\r\n    }\r\n\r\n    render() {\r\n        if (this.props.users.length === 0){\r\n            return (null);\r\n        }\r\n        return this.props.users.map((user) => (\r\n            <div className={this.getConversationClass(user)} key={user.id} onClick={this.props.selectConversation.bind(this, user)}>\r\n                <div className=\"title-text\">\r\n                    {user.username}\r\n                </div>\r\n                <div className=\"created-date\">\r\n                    {/* {user.messages ? user.messages[user.messages.length - 1].date.toLocaleString() : \"\"} */}\r\n                </div>\r\n                <div className=\"conversation-message\">\r\n                    {/* {user.messages ? user.messages[user.messages.length - 1].text : \"No messages\"} */}\r\n                </div>\r\n            </div>\r\n        )\r\n        );\r\n    }\r\n}\r\n\r\nConversations.propTypes = {\r\n    users: PropTypes.array.isRequired,\r\n    selectedUser: PropTypes.object,\r\n}\r\n\r\nexport default Conversations;","import React, { Component } from 'react';\r\nimport './Conversation.css';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass Conversation extends Component {\r\n    getMessageClass = (message) => {\r\n        return message.sender === this.props.loggedInUser.username ? \"message-row my-message\" : \"message-row other-message\";\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.messages) {\r\n            return (null);\r\n        }\r\n        return this.props.messages.slice(0).reverse().map((message) => (\r\n            <div className={this.getMessageClass(message)} key={(new Date(message.timeStamp)).getTime()}>\r\n                <div className=\"message-text\">{message.text}</div>\r\n                <div>\r\n                    <span className=\"message-username\">{message.sender + \" at \"}</span>\r\n                    <span className=\"message-time\">{(new Date(message.timeStamp)).toLocaleString()}</span>\r\n                </div>\r\n            </div>\r\n        )\r\n        );\r\n    }\r\n}\r\n\r\nConversation.propTypes = {\r\n    user: PropTypes.object.isRequired,\r\n    loggedInUser: PropTypes.object.isRequired,\r\n    messages: PropTypes.array.isRequired\r\n}\r\n\r\n\r\nexport default Conversation;","import React, { Component } from 'react';\r\nimport { HashRouter as Router, Route, Link } from 'react-router-dom'\r\nimport { Persist } from 'react-persist'\r\nimport './App.css';\r\nimport Register from './components/register/Register.js'\r\nimport Login from './components/login/Login.js'\r\nimport Conversations from './components/conversations/Conversations.js'\r\nimport Conversation from './components/conversation/Conversation.js'\r\n\r\nclass App extends Component {\r\n\r\n    state = {\r\n        loggedInUser: null,\r\n        users: [],\r\n        selectedUser: {},\r\n        text: \"\",\r\n        visibleMessages: [],\r\n\r\n    }\r\n\r\n    websocket;\r\n\r\n    selectConversation = (user) => {\r\n        this.setState({\r\n            selectedUser: user,\r\n            text: \"\"\r\n        }, this.getConversationMessages);\r\n    }\r\n\r\n    getConversationMessages = () => {\r\n        let messages;\r\n        if (this.state.selectedUser.username === \"ALL\") {\r\n            messages = this.state.loggedInUser.messages\r\n                .filter(message => message.receiver === \"ALL\");\r\n        } else {\r\n            messages = this.state.loggedInUser.messages\r\n                .filter(message => (message.sender === this.state.selectedUser.username\r\n                    && message.receiver === this.state.loggedInUser.username)\r\n                    ||\r\n                    (message.sender === this.state.loggedInUser.username\r\n                        && message.receiver === this.state.selectedUser.username));\r\n        }\r\n\r\n        this.setState({ visibleMessages: messages });\r\n    }\r\n\r\n    getUserMessages = () => {\r\n        const url = process.env.NODE_ENV === 'production' ? `rest/chat/messages/${this.state.loggedInUser.username}` : `http://localhost:8080/ChatWar/rest/chat/messages/${this.state.loggedInUser.username}`;\r\n        fetch(url, { method: \"GET\" })\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    alert(\"Error\");\r\n                }\r\n                else {\r\n                    return response.json();                    \r\n                }\r\n            })\r\n            .then((data) => {\r\n                if (!data){\r\n                    data = [];\r\n                }\r\n                let user = this.state.loggedInUser;\r\n                user.messages = data;\r\n                this.setState({\r\n                    loggedInUser: user,\r\n                    text: \"\"\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    getAllDataOnLogin = () => {\r\n        this.getUserMessages();\r\n        this.getOnlineUsers();\r\n        var loc = window.location, new_uri;\r\n        if (loc.protocol === \"https:\") {\r\n            new_uri = \"wss:\";\r\n        } else {\r\n            new_uri = \"ws:\";\r\n        }\r\n        new_uri += \"//\" + loc.host;\r\n        new_uri += loc.pathname + \"ws/\";\r\n        console.log(new_uri);\r\n        const wsHost = process.env.NODE_ENV === 'production' ? new_uri : \"ws://localhost:8080/ChatWar/ws/\";\r\n\r\n        this.websocket = new WebSocket(wsHost + this.state.loggedInUser.username);\r\n\r\n\r\n        this.websocket.onopen = () => {\r\n            console.log('connected')\r\n        }\r\n\r\n        this.websocket.onmessage = evt => {\r\n            // on receiving a message, add it to the list of messages\r\n            const message = JSON.parse(evt.data)\r\n            let messages = [...this.state.loggedInUser.messages, message]\r\n            let user = this.state.loggedInUser;\r\n            user.messages = messages;\r\n            this.setState({\r\n                loggedInUser: user,\r\n                text: \"\"\r\n            }, this.getConversationMessages);\r\n            //this.addMessage(message)\r\n        }\r\n\r\n        this.websocket.onclose = () => {\r\n            console.log('disconnected')\r\n            this.setState({\r\n                websocket: new WebSocket(wsHost + this.state.loggedInUser.username),\r\n            })\r\n        }\r\n    }\r\n\r\n    setLoggedInUser = (user) => {\r\n        this.setState({ loggedInUser: user }, () => {\r\n            this.getAllDataOnLogin();\r\n        });\r\n    }\r\n\r\n    logout = () => {\r\n        const url = process.env.NODE_ENV === 'production' ? `rest/chat/users/loggedIn/${this.state.loggedInUser.username}` : `http://localhost:8080/ChatWar/rest/chat/users/loggedIn/${this.state.loggedInUser.username}`;\r\n        fetch(url, { method: \"DELETE\", headers: { \"content-type\": \"application/json\" } })\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    alert(\"Error\");\r\n                }\r\n                else {\r\n                    this.setState({\r\n                        loggedInUser: null,\r\n                        selectedUser: null,\r\n                        users: []\r\n                    });\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n\r\n    }\r\n\r\n    getOnlineUsers = () => {\r\n        const url = process.env.NODE_ENV === 'production' ? \"rest/chat/users/loggedIn\" : \"http://localhost:8080/ChatWar/rest/chat/users/loggedIn\";\r\n        fetch(url)\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    alert(\"Error\");\r\n                }\r\n                else {\r\n                    return response.json();\r\n                }\r\n            }).then((data) => {\r\n                this.setState({ users: data.filter(user => user.username !== this.state.loggedInUser.username) });\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    getAllUsers = () => {\r\n        const url = process.env.NODE_ENV === 'production' ? \"rest/chat/users/registered\" : \"http://localhost:8080/ChatWar/rest/chat/users/registered\";\r\n        fetch(url)\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    alert(\"Error\");\r\n                }\r\n                else {\r\n                    return response.json();\r\n                }\r\n            }).then((data) => {\r\n                this.setState({ users: data.filter(user => user.username !== this.state.loggedInUser.username) });\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    onMessageChange = (e) => {\r\n        this.setState({ text: e.target.value });\r\n    }\r\n\r\n    onSendMessage = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.loggedInUser){\r\n            return;\r\n        }\r\n        let type;\r\n        if (this.state.selectedUser.username === \"ALL\") {\r\n            type = \"all\";\r\n        } else {\r\n            type = \"user\";\r\n        }\r\n        let message = {\r\n            sender: this.state.loggedInUser.username,\r\n            receiver: this.state.selectedUser.username,\r\n            text: this.state.text,\r\n            timeStamp: (new Date()).getTime()\r\n        }\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'content-type': 'application/json' },\r\n            body: JSON.stringify(message)\r\n        };\r\n        const url = process.env.NODE_ENV === 'production' ? `rest/chat/messages/${type}` : `http://localhost:8080/ChatWar/rest/chat/messages/${type}`;\r\n\r\n        fetch(url, requestOptions)\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    alert(\"Error\")\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    changeToAll = () => {\r\n        this.setState({\r\n            selectedUser: { username: \"ALL\" },\r\n            text: \"\"\r\n        }, this.getConversationMessages);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Router basename=\"/\">\r\n                <div className=\"App\">\r\n                    <Route exact path=\"/\" render={props => (\r\n                        <React.Fragment>\r\n                            <Login setLoggedInUser={this.setLoggedInUser}></Login>\r\n                        </React.Fragment>\r\n                    )} />\r\n                    <Route exact path=\"/login\" render={props => (\r\n                        <React.Fragment>\r\n                            <Login setLoggedInUser={this.setLoggedInUser}></Login>\r\n                        </React.Fragment>\r\n                    )} />\r\n                    <Route exact path=\"/register\" render={props => (\r\n                        <React.Fragment>\r\n                            <Register></Register>\r\n                        </React.Fragment>\r\n                    )} />\r\n                    <Route exact path=\"/chat\" render={props => (\r\n                        <React.Fragment>\r\n                            <div id=\"chat-container\">\r\n                                <div id=\"search-container\">\r\n                                    {\r\n                                        this.state.loggedInUser !== null ?\r\n                                            <div className=\"buttons-div\">\r\n                                                <button className=\"users-button\" onClick={this.getOnlineUsers}>Online</button>\r\n                                                <button className=\"users-button\" style={{ marginLeft: \"20px\" }} onClick={this.getAllUsers}>All</button>\r\n                                            </div>\r\n                                            : null\r\n                                    }\r\n                                </div>\r\n                                <div id=\"conversation-list\">\r\n                                    <Conversations users={this.state.users} selectConversation={this.selectConversation} selectedUser={this.state.selectedUser}></Conversations>\r\n                                </div>\r\n                                <div id=\"lower-left-container\">\r\n                                    {\r\n                                        this.state.loggedInUser === null ?\r\n                                            <div className=\"buttons-div\">\r\n                                                <Link className=\"button-link\" to='/login'>Login</Link>\r\n                                                <Link className=\"button-link\" style={{ marginLeft: \"20px\" }} to='/register'>Sign up</Link>\r\n\r\n                                            </div>\r\n                                            :\r\n                                            <div className=\"buttons-div\">\r\n                                                <button className=\"users-button\" onClick={this.logout}>Logout</button>\r\n                                                {\r\n                                                    this.state.selectedUser?.username !== \"ALL\" ?\r\n                                                        <button className=\"users-button\" style={{ marginLeft: \"20px\", width: \"120px\" }} onClick={this.changeToAll}>Send to all</button>\r\n                                                        :\r\n                                                        null\r\n                                                }\r\n\r\n                                            </div>\r\n                                    }\r\n\r\n                                </div>\r\n                                <div id=\"chat-title\">\r\n                                    <span>{this.state.selectedUser?.username}</span>\r\n                                </div>\r\n                                <div id=\"chat-message-list\">\r\n                                    {this.state.loggedInUser != null && this.state.selectedUser ?\r\n                                        <Conversation messages={this.state.visibleMessages} user={this.state.selectedUser} loggedInUser={this.state.loggedInUser}></Conversation> : null}\r\n                                </div>\r\n                                <form id=\"chat-form\" onSubmit={this.onSendMessage}>\r\n                                    {/* <form > */}\r\n                                    <div>\r\n                                        <input type=\"text\" value={this.state.text} placeholder=\"type a message\" onChange={this.onMessageChange} style={{ width: '80%' }} />\r\n                                        <input type=\"submit\" value=\"Send\"></input>\r\n                                    </div>\r\n\r\n                                    {/* </form> */}\r\n                                </form>\r\n\r\n                            </div>\r\n                        </React.Fragment>\r\n                    )} />\r\n                </div>\r\n                <Persist\r\n                    name=\"main-component\"\r\n                    data={this.state}\r\n                    debounce={500}\r\n                    onMount={data => this.setState(data)}\r\n                />\r\n            </Router>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}